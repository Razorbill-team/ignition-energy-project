{
  "custom": {},
  "params": {
    "widget_farm_id": "",
    "widget_farm_type": ""
  },
  "propConfig": {
    "params.widget_farm_id": {
      "paramDirection": "inout",
      "persistent": true
    },
    "params.widget_farm_type": {
      "paramDirection": "inout",
      "persistent": true
    }
  },
  "props": {
    "defaultSize": {
      "height": 244,
      "width": 279
    }
  },
  "root": {
    "children": [
      {
        "meta": {
          "name": "TextField_3"
        },
        "position": {
          "height": 22,
          "width": 58,
          "x": 35,
          "y": 78.238
        },
        "props": {
          "style": {
            "backgroundColor": "#414141",
            "borderColor": "#414141",
            "fontSize": 11,
            "fontWeight": "400"
          },
          "text": "Power"
        },
        "type": "ia.input.text-field"
      },
      {
        "meta": {
          "name": "TextField_4"
        },
        "position": {
          "height": 21,
          "width": 102,
          "x": 17,
          "y": 53
        },
        "props": {
          "style": {
            "backgroundColor": "#414141",
            "borderColor": "#414141",
            "color": "#E0E0E0",
            "fontSize": 12,
            "fontWeight": "400"
          },
          "text": "0 - System OK "
        },
        "type": "ia.input.text-field"
      },
      {
        "meta": {
          "name": "TextField_5"
        },
        "position": {
          "height": 23,
          "width": 111,
          "x": 35,
          "y": 99.74
        },
        "propConfig": {
          "props.text": {
            "binding": {
              "config": {
                "parameters": {
                  "farm_id": "{view.params.widget_farm_id}"
                },
                "queryPath": "widget_asset_name",
                "returnFormat": "json"
              },
              "transforms": [
                {
                  "code": "\tif value and len(value) \u003e 0:\n\t\tfarm_name \u003d value[0][\"farm_name\"]\n\t\tif \u0027PV\u0027 in farm_name:\n\t\t\tfarm_type \u003d \"solar irradiation\"\n\t\telif \u0027WT\u0027 in farm_name:\n\t\t\tfarm_type \u003d \"wind speed\"\n\t\telse:\n\t\t\tfarm_type \u003d \"Unknown\"\n\telse:\n\t\tfarm_type \u003d  \"Unknown Farm\"\n\treturn farm_type",
                  "type": "script"
                }
              ],
              "type": "query"
            }
          }
        },
        "props": {
          "style": {
            "backgroundColor": "#414141",
            "borderColor": "#414141",
            "fontSize": 11,
            "fontWeight": "400"
          }
        },
        "type": "ia.input.text-field"
      },
      {
        "meta": {
          "name": "TextField_6"
        },
        "position": {
          "height": 24,
          "width": 81,
          "x": 35,
          "y": 145.737
        },
        "props": {
          "style": {
            "backgroundColor": "#414141",
            "borderColor": "#414141",
            "fontSize": 11,
            "fontWeight": "400"
          },
          "text": "Warning"
        },
        "type": "ia.input.text-field"
      },
      {
        "meta": {
          "name": "TextField_7"
        },
        "position": {
          "height": 23,
          "width": 70,
          "x": 35,
          "y": 122.737
        },
        "props": {
          "style": {
            "backgroundColor": "#414141",
            "borderColor": "#414141",
            "fontSize": 11,
            "fontWeight": "400"
          },
          "text": "Running"
        },
        "type": "ia.input.text-field"
      },
      {
        "meta": {
          "name": "TextField_8"
        },
        "position": {
          "height": 23,
          "width": 81,
          "x": 35,
          "y": 168.737
        },
        "props": {
          "style": {
            "backgroundColor": "#414141",
            "borderColor": "#414141",
            "fontSize": 11,
            "fontWeight": "400"
          },
          "text": "Error"
        },
        "type": "ia.input.text-field"
      },
      {
        "meta": {
          "name": "TextField_9"
        },
        "position": {
          "height": 23,
          "width": 81,
          "x": 35,
          "y": 191.737
        },
        "props": {
          "style": {
            "backgroundColor": "#414141",
            "borderColor": "#414141",
            "fontSize": 11,
            "fontWeight": "400"
          },
          "text": "Offline"
        },
        "type": "ia.input.text-field"
      },
      {
        "meta": {
          "name": "Label"
        },
        "position": {
          "height": 25,
          "width": 52,
          "x": 200,
          "y": 77.264
        },
        "propConfig": {
          "props.text": {
            "binding": {
              "config": {
                "parameters": {
                  "farm_id": "{view.params.widget_farm_id}"
                },
                "queryPath": "AC For each site"
              },
              "transforms": [
                {
                  "code": "    try:\n        # If using query binding, the result is a dataset\n        if hasattr(value, \"getValueAt\"):\n            # Get value from first row, first column\n            active_power \u003d value.getValueAt(0, 0)\n        elif isinstance(value, list) and len(value) \u003e 0:\n            active_power \u003d value[0].get(\u0027active_power\u0027, 0)\n        else:\n            active_power \u003d 0\n\n        return \"{} MW\".format(active_power)\n\n    except Exception as e:\n        return \"Error\"",
                  "type": "script"
                }
              ],
              "type": "query"
            }
          }
        },
        "props": {
          "style": {
            "fontFamily": "Roboto",
            "fontSize": 11
          }
        },
        "type": "ia.display.label"
      },
      {
        "meta": {
          "name": "Label_0"
        },
        "position": {
          "height": 25,
          "width": 39,
          "x": 200,
          "y": 102.26400000000001
        },
        "props": {
          "style": {
            "fontFamily": "Roboto",
            "fontSize": 11
          },
          "text": 0
        },
        "type": "ia.display.label"
      },
      {
        "meta": {
          "name": "Label_1"
        },
        "position": {
          "height": 25,
          "width": 39,
          "x": 200,
          "y": 146.263
        },
        "props": {
          "style": {
            "fontFamily": "Roboto",
            "fontSize": 11
          },
          "text": 0
        },
        "type": "ia.display.label"
      },
      {
        "meta": {
          "name": "Label_2"
        },
        "position": {
          "height": 25,
          "width": 39,
          "x": 200,
          "y": 125.263
        },
        "props": {
          "style": {
            "fontFamily": "Roboto",
            "fontSize": 11
          },
          "text": 0
        },
        "type": "ia.display.label"
      },
      {
        "meta": {
          "name": "Label_3"
        },
        "position": {
          "height": 25,
          "width": 39,
          "x": 200,
          "y": 171.263
        },
        "propConfig": {
          "props.text": {
            "binding": {
              "config": {
                "parameters": {
                  "farm_id": "{view.params.widget_farm_id}"
                },
                "polling": {
                  "enabled": true,
                  "rate": "30"
                },
                "queryPath": "Status_site"
              },
              "overlayOptOut": true,
              "transforms": [
                {
                  "code": "    try:\n        # Case 1: Dataset (Vision or dataset return mode)\n        if hasattr(value, \"getValueAt\"):\n            error_count \u003d value.getValueAt(0, 0)\n\n        # Case 2: Perspective auto return (list of dicts)\n        elif isinstance(value, list) and len(value) \u003e 0:\n            error_count \u003d value[0].get(\"ERROR\", 0)\n        else:\n            error_count \u003d 0\n        if not error_count:\n            error_count \u003d 0\n        return \"{} Errors\".format(error_count)\n\n    except Exception as e:\n        return \"Error\"",
                  "type": "script"
                }
              ],
              "type": "query"
            }
          }
        },
        "props": {
          "style": {
            "fontFamily": "Roboto",
            "fontSize": 11
          }
        },
        "type": "ia.display.label"
      },
      {
        "meta": {
          "name": "Label_4"
        },
        "position": {
          "height": 25,
          "width": 39,
          "x": 200,
          "y": 194.263
        },
        "props": {
          "style": {
            "fontFamily": "Roboto",
            "fontSize": 11
          },
          "text": 0
        },
        "type": "ia.display.label"
      },
      {
        "meta": {
          "name": "Icon"
        },
        "position": {
          "height": 15,
          "rotate": {
            "anchor": "-680% -407%"
          },
          "width": 15,
          "x": 27,
          "y": 126.737
        },
        "props": {
          "path": "material/play_circle_outline"
        },
        "type": "ia.display.icon"
      },
      {
        "meta": {
          "name": "Icon_0"
        },
        "position": {
          "height": 15,
          "rotate": {
            "anchor": "-680% -407%"
          },
          "width": 15,
          "x": 27,
          "y": 149.737
        },
        "props": {
          "path": "material/stop_circle"
        },
        "type": "ia.display.icon"
      },
      {
        "meta": {
          "name": "Icon_1"
        },
        "position": {
          "height": 15,
          "rotate": {
            "anchor": "-680% -407%"
          },
          "width": 15,
          "x": 27,
          "y": 171.737
        },
        "props": {
          "path": "material/error"
        },
        "type": "ia.display.icon"
      },
      {
        "meta": {
          "name": "Icon_2"
        },
        "position": {
          "height": 15,
          "rotate": {
            "anchor": "-680% -407%"
          },
          "width": 15,
          "x": 27,
          "y": 194.737
        },
        "props": {
          "path": "material/highlight_off"
        },
        "type": "ia.display.icon"
      },
      {
        "meta": {
          "name": "Icon_3"
        },
        "position": {
          "height": 15,
          "rotate": {
            "anchor": "-680% -407%"
          },
          "width": 15,
          "x": 27,
          "y": 103.738
        },
        "propConfig": {
          "props.path": {
            "binding": {
              "config": {
                "parameters": {
                  "farm_id": "{view.params.widget_farm_id}"
                },
                "queryPath": "widget_asset_name",
                "returnFormat": "json"
              },
              "transforms": [
                {
                  "code": "\tif value and len(value) \u003e 0:\n\t\tfarm_name \u003d value[0][\"farm_name\"]\n\t\tif \u0027PV\u0027 in farm_name:\n\t\t\tfarm_type \u003d \"material/brightness_5\"\n\t\telif \u0027WT\u0027 in farm_name:\n\t\t\tfarm_type \u003d \"material/fast_rewind\"\n\treturn farm_type",
                  "type": "script"
                }
              ],
              "type": "query"
            }
          }
        },
        "type": "ia.display.icon"
      },
      {
        "meta": {
          "name": "Icon_4"
        },
        "position": {
          "height": 15,
          "rotate": {
            "anchor": "-680% -407%"
          },
          "width": 15,
          "x": 27,
          "y": 81.738
        },
        "props": {
          "path": "material/power_settings_new"
        },
        "type": "ia.display.icon"
      },
      {
        "meta": {
          "name": "DateTimeInput"
        },
        "position": {
          "height": 21,
          "rotate": {
            "anchor": "38% -13%"
          },
          "width": 116,
          "x": 143.98,
          "y": 53
        },
        "props": {
          "formattedValue": "Jul 23, 2025 12:00 AM",
          "inputProps": {
            "style": {
              "backgroundColor": "#414141",
              "borderStyle": "none",
              "fontFamily": "Roboto",
              "fontSize": 12
            }
          },
          "style": {
            "backgroundColor": "#736D5F",
            "classes": "Shadow"
          },
          "value": {
            "$": [
              "ts",
              0,
              1753375703391
            ],
            "$ts": 1753218000000
          }
        },
        "type": "ia.input.date-time-input"
      },
      {
        "meta": {
          "name": "Label_5"
        },
        "position": {
          "height": 1,
          "width": 221,
          "x": 26.78,
          "y": 78.238
        },
        "props": {
          "style": {
            "backgroundColor": "#555555"
          }
        },
        "type": "ia.display.label"
      },
      {
        "meta": {
          "name": "Label_6"
        },
        "position": {
          "height": 1,
          "width": 221,
          "x": 26.778000000000006,
          "y": 100.732
        },
        "props": {
          "style": {
            "backgroundColor": "#555555"
          }
        },
        "type": "ia.display.label"
      },
      {
        "meta": {
          "name": "Label_7"
        },
        "position": {
          "height": 1,
          "width": 221,
          "x": 26.78,
          "y": 168.737
        },
        "props": {
          "style": {
            "backgroundColor": "#555555"
          }
        },
        "type": "ia.display.label"
      },
      {
        "meta": {
          "name": "Label_8"
        },
        "position": {
          "height": 1,
          "width": 221,
          "x": 26.78,
          "y": 144.737
        },
        "props": {
          "style": {
            "backgroundColor": "#555555"
          }
        },
        "type": "ia.display.label"
      },
      {
        "meta": {
          "name": "Label_9"
        },
        "position": {
          "height": 1,
          "width": 221,
          "x": 26.78,
          "y": 123.737
        },
        "props": {
          "style": {
            "backgroundColor": "#555555"
          }
        },
        "type": "ia.display.label"
      },
      {
        "meta": {
          "name": "Label_10"
        },
        "position": {
          "height": 1,
          "width": 221,
          "x": 26.78,
          "y": 191.737
        },
        "props": {
          "style": {
            "backgroundColor": "#555555"
          }
        },
        "type": "ia.display.label"
      },
      {
        "meta": {
          "name": "Label_11"
        },
        "position": {
          "height": 1,
          "width": 221,
          "x": 26.78,
          "y": 214.737
        },
        "props": {
          "style": {
            "backgroundColor": "#555555"
          }
        },
        "type": "ia.display.label"
      },
      {
        "meta": {
          "name": "Label_12"
        },
        "position": {
          "height": 32,
          "width": 99,
          "x": 69.77000000000001,
          "y": 15.46
        },
        "propConfig": {
          "props.text": {
            "binding": {
              "config": {
                "parameters": {
                  "farm_id": "{view.params.widget_farm_id}"
                },
                "polling": {
                  "enabled": true,
                  "rate": "1"
                },
                "queryPath": "widget_asset_name",
                "returnFormat": "json"
              },
              "transforms": [
                {
                  "code": "\tif value and len(value) \u003e 0:\n\t\treturn value[0][\"farm_name\"]\n\telse:\n\t\treturn \"Unknown Farm\"\n\t\"\"\"\n    try:\n        # If value is a dataset, convert to PyDataSet first\n        if hasattr(value, \"getValueAt\"):\n            return str(value.getValueAt(0, 0))\n\n        # If already a list of dicts (common in Perspective auto mode)\n        elif isinstance(value, list) and len(value) \u003e 0:\n            return str(value[0].get(\u0027location\u0027, \u0027Unknown\u0027))\n\n        return \u0027No Data\u0027\n\n    except Exception as e:\n        return \"Error\"\n    \"\"\"",
                  "type": "script"
                }
              ],
              "type": "query"
            }
          }
        },
        "props": {
          "style": {
            "color": "#D5D5D5"
          },
          "textStyle": {
            "fontFamily": "Roboto",
            "fontSize": 14,
            "fontWeight": "bold"
          }
        },
        "type": "ia.display.label"
      },
      {
        "meta": {
          "name": "new 5"
        },
        "position": {
          "height": 43,
          "width": 48,
          "x": 20,
          "y": 10
        },
        "propConfig": {
          "props.source": {
            "binding": {
              "config": {
                "path": "view.params.widget_farm_type"
              },
              "transforms": [
                {
                  "code": "\tif value \u003d\u003d \u0027wt\u0027:\n\t\treturn \u0027/system/images/new 5.svg\u0027\n\tif value \u003d\u003d \u0027pv\u0027:\n\t\treturn \u0027/system/images/sun1.svg\u0027\n",
                  "type": "script"
                }
              ],
              "type": "property"
            }
          }
        },
        "type": "ia.display.image"
      }
    ],
    "meta": {
      "name": "root"
    },
    "props": {
      "style": {
        "backgroundColor": "#414141",
        "borderBottomLeftRadius": 5,
        "borderBottomRightRadius": 5,
        "borderTopLeftRadius": 5,
        "borderTopRightRadius": 5
      }
    },
    "type": "ia.container.coord"
  }
}